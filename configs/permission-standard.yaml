# kkcode 权限配置 — 标准模式
# 适用于：日常开发、团队协作
# 原则：读写自由，危险操作需确认
#
# 使用方式：将此文件内容合并到你的 kkcode 配置文件中

permission:
  default_policy: ask
  non_tty_default: deny

  rules:
    # ─── 只读工具：始终允许 ───
    - tool: read
      action: allow
    - tool: glob
      action: allow
    - tool: grep
      action: allow
    - tool: list
      action: allow
    - tool: codesearch
      action: allow
    - tool: websearch
      action: allow

    # ─── 规划与提问：始终允许 ───
    - tool: todowrite
      action: allow
    - tool: question
      action: allow
    - tool: ask
      action: allow

    # ─── 文件写入：项目内允许，项目外需确认 ───
    - tool: write
      action: allow
      file_pattern: "src/**"
    - tool: write
      action: allow
      file_pattern: "test/**"
    - tool: write
      action: allow
      file_pattern: "tests/**"
    - tool: write
      action: allow
      file_pattern: "docs/**"
    - tool: write
      action: allow
      file_pattern: "configs/**"
    - tool: write
      action: ask

    - tool: edit
      action: allow
    - tool: patch
      action: allow

    # ─── Bash 命令：常用开发命令允许，危险命令拒绝 ───
    - tool: bash
      action: allow
      command_prefix: "node"
    - tool: bash
      action: allow
      command_prefix: "npm"
    - tool: bash
      action: allow
      command_prefix: "npx"
    - tool: bash
      action: allow
      command_prefix: "git"
    - tool: bash
      action: allow
      command_prefix: "python"
    - tool: bash
      action: allow
      command_prefix: "pip"
    - tool: bash
      action: allow
      command_prefix: "cargo"
    - tool: bash
      action: allow
      command_prefix: "go"
    - tool: bash
      action: allow
      command_prefix: "make"
    - tool: bash
      action: allow
      command_prefix: "ls"
    - tool: bash
      action: allow
      command_prefix: "cat"
    - tool: bash
      action: allow
      command_prefix: "wc"

    # 危险命令拒绝
    - tool: bash
      action: deny
      command_prefix: "rm -rf /"
    - tool: bash
      action: deny
      command_prefix: "git push --force"

    # 其他 bash 命令需确认
    - tool: bash
      action: ask
